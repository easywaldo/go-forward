---
layout: default
---
<div class="post-container">
  <article class="post h-entry" itemscope itemtype="http://schema.org/BlogPosting">

    <header class="post-header">
      <h1 class="post-title p-name" itemprop="name headline">{{ page.title | escape }}</h1>
      <p class="post-meta">
        <time class="dt-published" datetime="{{ page.date | date_to_xmlschema }}" itemprop="datePublished">
          {{ page.date | date: "%Y년 %m월 %d일" }}
        </time>
        {%- if page.modified_date -%}
          ~ 
          <time class="dt-modified" datetime="{{ page.modified_date | date_to_xmlschema }}" itemprop="dateModified">
            {{ page.modified_date | date: "%Y년 %m월 %d일" }}
          </time>
        {%- endif -%}
        {%- if page.author -%}
          • <span itemprop="author" itemscope itemtype="http://schema.org/Person"><span class="p-author h-card" itemprop="name">{{ page.author }}</span></span>
        {%- endif -%}
        {%- if page.categories.size > 0 -%}
          • 📂 
          {%- for category in page.categories -%}
            <span class="category">{{ category }}</span>
            {%- unless forloop.last -%}, {%- endunless -%}
          {%- endfor -%}
        {%- endif -%}
      </p>
    </header>

    <div class="post-wrapper">
      <div class="post-content e-content" itemprop="articleBody">
        {{ content }}
      </div>
    </div>

    <!-- Table of Contents Navigator - 완전히 분리된 사이드바 -->
    <aside class="toc-navigator">
      <div class="toc-content">
        <h4>📋 목차</h4>
        <nav id="toc"></nav>
      </div>
    </aside>

    {%- if page.tags.size > 0 -%}
      <div class="post-tags">
        <strong>Tags:</strong>
        {%- for tag in page.tags -%}
          <span class="tag">#{{ tag }}</span>
          {%- unless forloop.last -%} {%- endunless -%}
        {%- endfor -%}
      </div>
    {%- endif -%}

    {%- if site.disqus.shortname -%}
      <div class="comments">
        <div id="disqus_thread"></div>
        <script>
          var disqus_config = function () {
            this.page.url = "{{ page.url | absolute_url }}";
            this.page.identifier = "{{ page.url | absolute_url }}";
          };
          (function() {
            var d = document, s = d.createElement('script');
            s.src = 'https://{{ site.disqus.shortname }}.disqus.com/embed.js';
            s.setAttribute('data-timestamp', +new Date());
            (d.head || d.body).appendChild(s);
          })();
        </script>
        <noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
      </div>
    {%- endif -%}

    <a class="u-url" href="{{ page.url | relative_url }}" hidden></a>
  </article>
</div>

<script>
document.addEventListener('DOMContentLoaded', function() {
  // Generate Table of Contents
  const tocNav = document.getElementById('toc');
  const headers = document.querySelectorAll('.post-content h2, .post-content h3, .post-content h4');
  
  if (headers.length > 0) {
    const tocList = document.createElement('ul');
    tocList.className = 'toc-list';
    
    headers.forEach(function(header, index) {
      const id = 'header-' + index;
      header.id = id;
      
      const listItem = document.createElement('li');
      listItem.className = 'toc-item toc-' + header.tagName.toLowerCase();
      
      const link = document.createElement('a');
      link.href = '#' + id;
      link.textContent = header.textContent;
      link.className = 'toc-link';
      
      listItem.appendChild(link);
      tocList.appendChild(listItem);
    });
    
    tocNav.appendChild(tocList);
    
    // Smooth scrolling for TOC links
    document.querySelectorAll('.toc-link').forEach(function(link) {
      link.addEventListener('click', function(e) {
        e.preventDefault();
        const targetId = this.getAttribute('href').substring(1);
        const targetElement = document.getElementById(targetId);
        
        if (targetElement) {
          targetElement.scrollIntoView({
            behavior: 'smooth',
            block: 'start'
          });
        }
      });
    });
    
    // Highlight current section in TOC
    function highlightTocLink() {
      const scrollPos = window.scrollY + 100;
      const tocLinks = document.querySelectorAll('.toc-link');
      
      headers.forEach(function(header, index) {
        const headerTop = header.offsetTop;
        const headerBottom = headerTop + header.offsetHeight;
        
        if (scrollPos >= headerTop && scrollPos < headerBottom) {
          tocLinks.forEach(function(link) {
            link.classList.remove('active');
          });
          tocLinks[index].classList.add('active');
        }
      });
    }
    
    window.addEventListener('scroll', highlightTocLink);
    highlightTocLink(); // Initial call
  } else {
    document.querySelector('.toc-navigator').style.display = 'none';
  }
});
</script>
